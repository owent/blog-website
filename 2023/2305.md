---
author: owent
categories:
  - Article
  - Blablabla
date: 2023-06-16 22:25:45
draft: false
id: 2305
tags: 
  - protobuf
  - InternalMetadata
  - æœªå®šä¹‰ç¬¦å·
  - cmake-toolset
title: å…³äºprotobufè¿‘æœŸç‰ˆæœ¬ï¼ˆv20/v3.20+ï¼‰å’Œ gRPC v1.54ç‰ˆæœ¬åœ¨æŸäº›ELFç¼–è¯‘ç¯å¢ƒä¸‹çš„ä¸€äº›é“¾æ¥å’Œç¼–è¯‘é—®é¢˜
type: post
---

## å‰è¨€

å¹´åˆçš„æ—¶å€™æˆ‘ä»¬é¡¹ç›®ç»„çš„æ„å»ºç³»ç»Ÿ( [cmake-toolset][1] )é‡ŒæŠŠ [protobuf][2] å‡çº§åˆ°äº† v20/v3.20 ç‰ˆæœ¬, [gRPC][3] ä¹Ÿå‡çº§åˆ°äº† v1.54 ç‰ˆæœ¬ã€‚ç„¶è€Œè¿™ä¸¤ä¸ªç‰ˆæœ¬åœ¨Linuxçš„ELF ABIå’ŒMacOSçš„Macho ABIä¸‹éƒ½å‡ºç°äº†ä¸€äº›ç¬¦å·æœªå®šä¹‰çš„é—®é¢˜ï¼ˆå½“ç„¶ä¹ŸåŒ…å«Androidå’ŒiOSï¼‰ã€‚
è¿™äº›é—®é¢˜ä¹Ÿä¸ä»…é™äº [protobuf][2] v20/v3.20 å’Œ [gRPC][3] v1.54ï¼Œåç»­çš„ç‰ˆæœ¬æœ‰äº›ä¿®å¤äº†ï¼Œæœ‰äº›æ²¡æœ‰ã€‚åœ¨å®˜æ–¹å®Œå…¨ä¿®å¤ä¹‹å‰ï¼Œæˆ‘ä»¬è‡ªå·±æ‰“äº†ä¸€äº›patchå»ä¿®å¤è¿™äº›é—®é¢˜ã€‚

## [protobuf][2] çš„é“¾æ¥å’Œç¬¦å·é—®é¢˜

### `InternalMetadata::~InternalMetadata()` æœªå®šä¹‰

[protobuf][2]çš„é—®é¢˜ä¸»è¦åˆ†ä¸¤ç»„ï¼Œç¬¬ä¸€ç»„æŠ¥çš„æ˜¯ `InternalMetadata::~InternalMetadata()` æœªå®šä¹‰ã€‚è¿™ä¸ªé—®é¢˜å­˜åœ¨äº v20/v3.20 å’Œ v21/v3.21 ã€‚v22/v4.22 ç‰ˆæœ¬å·²ä¿®å¤ï¼ˆv22/v4.22åœ¨æ„å»ºå’Œä¾èµ–ä¸Šæœ‰ä¸ªå¾ˆå¤§çš„å˜åŒ–ï¼Œåé¢å†å†™åˆ†äº«è¯´æ˜ï¼‰ã€‚è¿™ä¸ªé—®é¢˜çš„issueä¹Ÿå¯ä»¥è§äº <https://github.com/protocolbuffers/protobuf/issues/9947> ã€‚

å…¶æœ¬è´¨åŸå› å¯ä»¥å…ˆçœ‹ v20/v3.20 ç‰ˆæœ¬çš„ [metadata_lite.h#L73](https://github.com/protocolbuffers/protobuf/blob/v20.2/src/google/protobuf/metadata_lite.h#L73)

```cpp
#if defined(NDEBUG) || defined(_MSC_VER)
  ~InternalMetadata() {
    if (HasMessageOwnedArenaTag()) {
      delete reinterpret_cast<Arena*>(ptr_ - kMessageOwnedArenaTagMask);
    }
  }
#else
  ~InternalMetadata();
#endif
```

è¿˜æœ‰æºæ–‡ä»¶ [message_lite.cc#L528](https://github.com/protocolbuffers/protobuf/blob/v20.2/src/google/protobuf/message_lite.cc#L528)

```cpp
// Non-inline implementations of InternalMetadata routines
#if defined(NDEBUG) || defined(_MSC_VER)
// for opt and MSVC builds, the destructor is defined in the header.
#else
// This is moved out of the header because the GOOGLE_DCHECK produces a lot of code.
InternalMetadata::~InternalMetadata() {
  if (HasMessageOwnedArenaTag()) {
    GOOGLE_DCHECK(!HasUnknownFieldsTag());
    delete reinterpret_cast<Arena*>(ptr_ - kMessageOwnedArenaTagMask);
  }
}
#endif
```

è¿™é‡Œçš„æœ¬æ„æ˜¯åœ¨éDebugæ¨¡å¼ä¸‹è¿™ä¸ªææ„å†™å¤´æ–‡ä»¶é‡Œï¼Œè¿™æ ·æŸäº›ç¼–è¯‘å™¨å’Œç¼–è¯‘é€‰é¡¹å¯ä»¥è¢«è‡ªåŠ¨å†…è¿ï¼Œå¯ä»¥ä¼˜åŒ–æ‰ã€‚è€Œè°ƒè¯•æ¨¡å¼ä¸‹æœ‰é¢å¤–çš„æ£€æŸ¥èµ°æœ¬åœ°çš„ç¬¦å·ã€‚
ä½†æ˜¯è¿™é‡Œçš„é—®é¢˜æ˜¯ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šåœ¨ç¼–è¯‘ä¾èµ–åº“é‡‡ç”¨Releaseæ¨¡å¼ï¼Œè€Œä½¿ç”¨è€…å¯èƒ½å¤„äºDebugæ¨¡å¼ã€‚è¿™å°±æ„å‘³ç€ç¼–è¯‘ [protobuf][2] çš„æ—¶å€™æ˜¯å¯èƒ½è¢«ä¼˜åŒ–æ‰è€Œæ²¡æœ‰è¿™ä¸ªç¬¦å·çš„ã€‚
ä½†æ˜¯ä½¿ç”¨è€…è®¤ä¸ºæœ‰è¿™ä¸ªç¬¦å·ï¼Œæœ€ç»ˆé“¾æ¥å¤±è´¥ã€‚

è¿™ä¸ªé—®é¢˜åœ¨ [protobuf][2] v21.4/v3.21.4 ç‰ˆæœ¬é‡Œè¿›è¡Œäº†éƒ¨åˆ†ä¿®å¤ï¼Œä½†æ˜¯æŸäº›ç¼–è¯‘ç¯å¢ƒè¿˜æ˜¯æœ‰é—®é¢˜ã€‚

æˆ‘ä»¬å…ˆæ¥çœ‹ [protobuf][2] v21/v3.21 ç‰ˆæœ¬é‡Œ [metadata_lite.h#L81](https://github.com/protocolbuffers/protobuf/blob/v21.12/src/google/protobuf/metadata_lite.h#L81) çš„ä»£ç ã€‚

```cpp
  ~InternalMetadata() {
#if defined(NDEBUG) || defined(_MSC_VER)
    if (HasMessageOwnedArenaTag()) {
      delete reinterpret_cast<Arena*>(ptr_ - kMessageOwnedArenaTagMask);
    }
#else
    CheckedDestruct();
#endif
  }
```

å’‹ä¸€çœ‹å¥½åƒæ˜¯æ²¡é—®é¢˜äº†ã€‚æ— è®ºä»€ä¹ˆæƒ…å†µéƒ½æœ‰ `~InternalMetadata()` äº†ï¼Œä½†æ˜¯C++ç¼–è¯‘å™¨åœ¨è‡ªåŠ¨å†…è”ä¸€è¯´ï¼ŒğŸ˜‚ã€‚æŸäº›ç¼–è¯‘å™¨åœ¨ç¼–è¯‘ `.pb.cc` æ—¶å¦‚æœèµ°ä¸‹é¢çš„åˆ†æ”¯è‡ªåŠ¨å†…è”äº†ï¼Œé‚£ä¹ˆå°±ä¸ä¼šç”Ÿæˆ `~InternalMetadata()` è¿™ä¸ªç¬¦å·ã€‚è¿™ä¸ªç±»çš„ææ„åœ¨ `MessageLite` è¿™ä¸ªç±»ä¸­è¢«è°ƒç”¨ï¼Œåœ¨ç”Ÿæˆçš„ `.pb.cc` é‡Œæ˜¯é…æœ‰è¢«ç›´æ¥è°ƒç”¨çš„ã€‚ä½†æ˜¯æŸäº›ç¼–è¯‘å™¨ä¼šç”Ÿæˆå¯¹å®ƒçš„ææ„ç¬¦å·çš„å¼•ç”¨ï¼ˆå¯èƒ½ä¹Ÿå±äºç¼–è¯‘å™¨çš„BUGï¼‰ã€‚
è¿™æ—¶å€™åˆä¼šå¯¼è‡´ç¬¦å·æœªå®šä¹‰ã€‚

> æˆ‘ä»¬å‘ç°é—®é¢˜çš„ç¯å¢ƒæ˜¯ç¼–è¯‘iOSç‰ˆæœ¬æ—¶ï¼Œå…·ä½“ç¼–è¯‘å™¨ç‰ˆæœ¬å·å¿˜è®°äº†ï¼Œå¥½åƒæ˜¯AppleClang 12æˆ–è€…AppleClang 13ã€‚

è§£å†³è¿™ä¸ªé—®é¢˜ä¹Ÿå¾ˆç®€å•ï¼ŒæŠŠå£°æ˜æ”¹æˆ `PROTOBUF_NOINLINE ~InternalMetadata()` å°±è¡Œäº†ã€‚
ä»¥ä¸Šé—®é¢˜ä¹Ÿå¯ä»¥åœ¨æˆ‘ä»¬çš„æ„å»ºç³»ç»Ÿé¡¹ç›®ä¸­æ‰¾åˆ°Patchæ–‡ä»¶ï¼ˆè¿˜åŒ…å«å°‘é‡å…¶ä»–é—®é¢˜çš„é€‚é…ï¼‰:

+ <https://github.com/atframework/cmake-toolset/blob/main/ports/protobuf/protobuf-v3.21.1.patch>
+ <https://github.com/atframework/cmake-toolset/blob/main/ports/protobuf/protobuf-v3.21.4.patch>

### `XXX_default_instance_` æœªå®šä¹‰

ç¬¬äºŒä¸ªé—®é¢˜æ˜¯é»˜è®¤çš„instanceç¬¦å·æœªå®šä¹‰çš„é—®é¢˜ã€‚è¿™ä¸ªé—®é¢˜å­˜åœ¨äº v21/v3.21 åˆ°ç›®å‰æœ€æ–°ç‰ˆæœ¬ ï¼ˆv23/4.23ï¼‰ã€‚æˆ‘æ²¡æœ‰è¿½æŸ¥æ›´æ—©ç‰ˆæœ¬ï¼Œå¤§æ¦‚ç‡ä¹Ÿæœ‰è¿™ä¸ªé—®é¢˜ã€‚
æŠ¥çš„é”™è¯¯å¤§è‡´æ˜¯ `"struct XXX YYYY_default_instance_"` ç¬¦å·æœªå®šä¹‰ã€‚è§¦å‘æ¡ä»¶æ¯”è¾ƒå¤šï¼š

+ éœ€è¦ç¼–è¯‘æˆåŠ¨æ€åº“
+ é»˜è®¤ç¬¦å·éšè—ï¼ˆWindowsé»˜è®¤éšè—ï¼ŒLinuxé»˜è®¤å¯è§ï¼‰
+ ä½¿ç”¨ `dllexport_decl=` æ¥è®¾ç½®å¯¼å‡ºç¬¦å·

åœ¨Windowsä¸­ä¸ªï¼Œæ¯ä¸€ä¸ªdllå’Œexecéƒ½æœ‰è‡ªå·±çš„ç¬¦å·è¡¨å’Œå †ç®¡ç†ã€‚æ‰€ä»¥å½“ä½¿ç”¨dllæ—¶ï¼Œéœ€è¦æŠŠè¦å¯¼å‡ºçš„ç¬¦å·è®¾ç½®ä¸º `__declspec(dllexport)/__attribute__((__dllexport__))`, å¯¼å…¥çš„æ—¶å€™è®¾ç½®ä¸º `__declspec((dllimport))/__attribute__((__dllimport__))` ã€‚
è€Œåœ¨Linuxé‡Œï¼Œé»˜è®¤æ˜¯å…±äº«ä¸”å…¨å±€å¯è§çš„ã€‚è€Œå¾ˆå¤šæ„å»ºç³»ç»Ÿä¸­ä¼šæŠŠWindowsç‰ˆæœ¬ä¾èµ–ä½¿ç”¨é™æ€åº“ï¼Œæ‰€ä»¥å¾ˆå¤šåŒå­¦ä¸ä¼šç¢°åˆ°è¿™äº›é—®é¢˜ã€‚

æœ‰ä¸€äº›æ›´ä¸¥è°¨æ›´å®‰å…¨é˜²æ­¢ç¬¦å·å†²çªçš„æ–¹å¼æ˜¯å§Linuxä¸‹ç¬¦å·ä¹Ÿé€šè¿‡ `__attribute__((visibility("hidden")))` è®¾ä¸ºé»˜è®¤éšè—ï¼Œç„¶åå¯¹äºè¦å¯¼å‡ºçš„ç¬¦å·è®¾ç½®ä¸º `__attribute__((visibility("default")))` æ¥å…±äº«ï¼ˆæ¯”å¦‚Unreal Engineçš„æ„å»ºç³»ç»Ÿï¼‰ã€‚è¿™æ—¶å€™é€šå¸¸çš„åšæ³•æ˜¯æä¾›ä¸€ä¸ªå®ï¼Œåœ¨ç¼–è¯‘çš„æ—¶å€™è®¾ç½®PRIVATEå®šä¹‰ä¸º `__declspec(__dllimport__)/__attribute__((__dllimport__))/__attribute__((visibility("default")))` å¯¹å¤–ä¼ é€’çš„PUBLICå®šä¹‰ä¸º `__declspec(dllexport)/__attribute__((__dllexport__))/__attribute__((visibility("default")))` ã€‚

åœ¨ [protobuf][2] ç”Ÿæˆçš„ä»£ç ä¸­ï¼Œç”±äº `.pb.cc` ä¸­å­˜åœ¨å…¨å±€å˜é‡ï¼Œæˆ‘ä»¬ä¹Ÿä¸èƒ½å…è®¸åŒä¸€ä¸ªå…¨å±€å˜é‡åœ¨å¤šä¸ªåŠ¨æ€åº“ä¸­ï¼Œå¦åˆ™ä¼šé‡å¤æ³¨å†Œå’Œæ‰§è¡Œæ„é€ ææ„å‡½æ•°ã€‚é‚£ä¹ˆä¸ºäº†å®ç°ä¸Šé¢çš„æµç¨‹ï¼Œ[protobuf][2] æä¾›äº†ä¸€ä¸ªç”Ÿæˆé€‰é¡¹ `dllexport_decl`ï¼Œç”¨æ¥å¯¹è¦å¯¼å‡ºçš„ç¬¦å·æŒ‡å®šè¿™ä¸ªå®ã€‚

é‚£ä¹ˆæˆ‘ä»¬å†æ¥çœ‹ä¸€ä¸ªè¿™ä¸ªé—®é¢˜å¯¹åº”çš„ç”Ÿæˆä»£ç ï¼ˆé€‰é¡¹æ˜¯ `--cpp_out=dllexport_decl=TGF_BATTLE_PROTOCOL_API:<OUT DIR>`ï¼‰ã€‚
é¦–å…ˆå¯¹äº `.pb.h` :

```cpp
class DBattleAffix;
struct DBattleAffixDefaultTypeInternal;
TGF_BATTLE_PROTOCOL_API extern DBattleAffixDefaultTypeInternal _DBattleAffix_default_instance_;

// ...
class TGF_BATTLE_PROTOCOL_API DBattleAffix final : // ...
{
  // ...
  static inline const DBattleAffix* internal_default_instance() {
    return reinterpret_cast<const DBattleAffix*>(
               &_DBattleAffix_default_instance_);
  }
}
```

å¯ä»¥çœ‹åˆ°ï¼Œæœ‰æ¥å£å¼•ç”¨äº† `_DBattleAffix_default_instance_` è¿™ä¸ªå…¨å±€å˜é‡çš„åœ°å€ã€‚é‚£ä¹ˆåœ¨ `.pb.cc` é‡Œ:

```cpp
struct DBattleAffixDefaultTypeInternal {
  PROTOBUF_CONSTEXPR DBattleAffixDefaultTypeInternal()
      : _instance(::_pbi::ConstantInitialized{}) {}
  ~DBattleAffixDefaultTypeInternal() {}
  union {
    DBattleAffix _instance;Bu
  };
};
PROTOBUF_ATTRIBUTE_NO_DESTROY PROTOBUF_CONSTINIT PROTOBUF_ATTRIBUTE_INIT_PRIORITY1 DBattleAffixDefaultTypeInternal _DBattleAffix_default_instance_;
```

å¯ä»¥çœ‹åˆ°ï¼Œ`.pb.cc` é‡Œé¢å¹¶æ²¡æœ‰è®¾ç½® `TGF_BATTLE_PROTOCOL_API` æ¥å¯¼å‡ºç¬¦å·ï¼Œæœ€ç»ˆå°±ä¼šå¯¼è‡´ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„é“¾æ¥é”™è¯¯:

```bash
7>TGFBattleUtility.lib(BattleAffixAlgorithm.obj): Error LNK2001 : æ— æ³•è§£æçš„å¤–éƒ¨ç¬¦å· "struct tgf::DBattleAffixDefaultTypeInternal tgf::_DBattleAffix_default_instance_" (?_DBattleAffix_default_instance_@tgf@@3UDBattleAffixDefaultTypeInternal@1@A)
```

é‚£ä¹ˆè§£å†³æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯åœ¨ `protoc` çš„ä»£ç é‡Œè¡¥ä¸Šè¿™äº›ï¼Œï¼ˆv21å’Œv23ç‰ˆæœ¬å˜åŒ–æ¯”è¾ƒå¤§ï¼Œå…·ä½“å¯ä»¥å‚è€ƒä¸‹é¢çš„patch filesï¼‰

+ <https://github.com/atframework/cmake-toolset/blob/main/ports/protobuf/protobuf-v3.21.12.patch>
+ <https://github.com/atframework/cmake-toolset/blob/8c8659f2d64283b02a24b7c34ffcd0d24eb03ca6/ports/protobuf/protobuf-v23.patch>

è¿™ä¸ªissueå·²ç»æäº¤åˆ° <https://github.com/protocolbuffers/protobuf/issues/13084> å¹¶ä¸”BUGä¿®å¤çš„PRåœ¨ <https://github.com/protocolbuffers/protobuf/pull/13085> ã€‚æœ‰å…´è¶£çš„å°ä¼™ä¼´ä¹Ÿå¯ä»¥è·Ÿè¿›ã€‚

## [gRPC][3] çš„é“¾æ¥å’Œç¼–è¯‘é—®é¢˜

### [gRPC][3] çš„ v1.54.0 çš„é“¾æ¥ç¬¦å·é—®é¢˜

æˆ‘ä»¬åœ¨ä½¿ç”¨é«˜ç‰ˆæœ¬ç¼–è¯‘å™¨æ—¶ï¼Œä¼šå°½å¯èƒ½ä½¿ç”¨é«˜ç‰ˆæœ¬çš„STDæ ‡å‡†ã€‚åœ¨C++17ä»¥å `constexpr` å…³é”®å­—éšå¼ä¼šè¢«é™„åŠ  `inline` ï¼ˆè¯¦æƒ…å‚è€ƒ: <https://en.cppreference.com/w/cpp/language/constexpr>ï¼‰ã€‚
è¿™æ„å‘³ç€è¿™äº›å˜é‡å¯èƒ½ä¸ä¼šç”Ÿæˆå®é™…çš„ç¬¦å·ã€‚é‚£ä¹ˆé—®é¢˜å°±æ¥äº†ã€‚æˆ‘ä»¬æ¥çœ‹v1.54.0 ç‰ˆæœ¬çš„ä»£ç :

é¦–å…ˆ `src/core/ext/gcp/metadata_query.h` :

```cpp
class MetadataQuery : public InternallyRefCounted<MetadataQuery> {
 public:
  static const char kZoneAttribute[];
  static const char kClusterNameAttribute[];
  static const char kRegionAttribute[];
  static const char kInstanceIdAttribute[];
  static const char kIPv6Attribute[];
// ...
```

ç„¶å `src/core/ext/gcp/metadata_query.cc` :

```cpp
constexpr const char MetadataQuery::kZoneAttribute[] =
    "/computeMetadata/v1/instance/zone";
constexpr const char MetadataQuery::kClusterNameAttribute[] =
    "/computeMetadata/v1/instance/attributes/cluster-name";
constexpr const char MetadataQuery::kRegionAttribute[] =
    "/computeMetadata/v1/instance/region";
constexpr const char MetadataQuery::kInstanceIdAttribute[] =
    "/computeMetadata/v1/instance/id";
constexpr const char MetadataQuery::kIPv6Attribute[] =
    "/computeMetadata/v1/instance/network-interfaces/0/ipv6s";
```

è¿™æ—¶å€™ï¼ŒæŸäº›ç¼–è¯‘ç¯å¢ƒä¸‹è¿™äº›å˜é‡è¢«inlineäº†ä»¥åï¼Œå°±ä¼šå‡ºç°æœªå®šä¹‰ç¬¦å·çš„é—®é¢˜ã€‚
ç›¸å…³ä¿®å¤æ”¾åœ¨äº† <https://github.com/atframework/cmake-toolset/blob/main/ports/grpc/grpc-v1.54.0.patch> ã€‚
åŒæ—¶è¿™ä¸ªBUGåœ¨ v1.54.2 é‡Œå·²ç»è¢«ä¿®å¤ã€‚

### [gRPC][3] çš„åœ¨éƒ¨åˆ†ç¼–è¯‘å™¨ä¸Šçš„å…¼å®¹æ€§é—®é¢˜

æŒ‰ç…§ <https://en.cppreference.com/w/cpp/memory/unique_ptr> çš„è¦æ±‚ï¼Œ `std::unqieur_ptr<T, std::default_delete<T>>` ä¸­çš„ `T` åº”è¯¥æ˜¯å…è®¸å‰ç½®å£°æ˜çš„ã€‚
ä½†æ˜¯æŸäº›ç¼–è¯‘å™¨æˆ–è€…STLå®ç°çš„é—®é¢˜ï¼Œå¯¼è‡´å¼€å¯æœ€é«˜æ”¯æŒæ ‡å‡†æ—¶ `src/core/lib/surface/server.h` é‡Œå‰ç½®ç”³æ˜ç±»å‹ç”¨åœ¨ `std::unqieur_ptr` æ—¶ä¼šæŠ¥ `incomplete type` çš„é—®é¢˜ã€‚
ä¸´æ—¶çš„å¤„ç†æ–¹å¼æ˜¯æŠŠå®ƒä»¬æ”¹æˆ `shared_ptr` ï¼Œè™½ç„¶æš‚æ—¶æœ‰è½»å¾®çš„æ€§èƒ½æŸå¤±ï¼Œä½†æ˜¯ä¹Ÿå¯ä»¥åç»­ç­‰å®˜æ–¹æ›´å®Œæ•´çš„ä¿®å¤ã€‚Patchæ–‡ä»¶åœ¨ <https://github.com/atframework/cmake-toolset/blob/main/ports/grpc/grpc-v1.54.2.patch>

## æœ€å

è¿‘æœŸç¢°åˆ°çš„ [protobuf][2] å’Œ [gRPC][3] çš„æ„å»ºå‘ä¹Ÿå°±è¿™ä¹ˆå¤šã€‚åç»­é’ˆå¯¹ [protobuf][2] v22+ å’Œ [gRPC][3] v1.55+ è¿˜æœ‰ä¸€äº›æ¯”è¾ƒé‡å¤§çš„å˜åŒ–ã€‚å¯¼è‡´æˆ‘ä»¬çš„Patchè¿‡ç¨‹æœ‰ä¸€ä¸ªå¤§æ”¹é€ ã€‚ç‰¹åˆ«æ˜¯è®¾è®¡upbçš„éƒ¨åˆ†ã€‚
è¿™éƒ¨åˆ†åç»­åœ¨å†™åˆ†äº«å§ï¼Œä¹Ÿæ¬¢è¿æœ‰å…´è¶£çš„å°ä¼™ä¼´äº¤æµã€‚

[1]: https://github.com/atframework/cmake-toolset
[2]: https://github.com/protocolbuffers/protobuf
[3]: https://github.com/grpc/grpc
