<!doctype html><html lang=zh-cn>
<head>
<meta charset=utf-8>
<title>Linux 编译安装 GCC 4.9|I'm OWenT</title>
<meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1">
<link rel=canonical href=//owent.net/2014/1038.html>
<link href=//owent.net/index.xml rel=alternate type=application/rss+xml title="I'm OWenT">
<link rel=icon href=../favicon.ico>
<link rel=stylesheet href=//unpkg.com/bootstrap@latest/dist/css/bootstrap.min.css crossorigin=anonymous>
<link rel=stylesheet href=//owent.net/css/style.css>
<script type=text/javascript src=//unpkg.com/jquery@latest/dist/jquery.slim.min.js crossorigin=anonymous></script>
<link rel=stylesheet href=//owent.net/css/syntax.css>
</head>
<body><div id=container><div id=wrap>
<header id=header>
<div id=banner></div>
<div id=header-outer>
<div id=header-title>
<h1 id=site-title>
<a href=//owent.net id=logo>I'm OWenT</a>
</h1>
<h2 id=site-description>Challenge Everything</h2>
</div>
<div id=header-inner>
<nav id=main-nav class="navbar navbar-expand-md navbar-dark">
<button class="navbar-toggler navbar-toggler-right" type=button data-toggle=collapse data-target=#main-nav-links aria-controls=main-nav-links aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span>
</button>
<a id=main-nav-brand class="navbar-brand collapse" href=#>#</a>
<div class="collapse navbar-collapse position-relative" id=main-nav-links>
<ul class="navbar-nav mr-auto">
<li class=nav-item><a class=nav-link href=../ title=Home>Home</a></li>
<li class=nav-item><a class=nav-link href=../archives.html title=Archives>Archives</a></li>
<li class=nav-item><a class=nav-link href=../about.html title=About>About</a></li>
<li class=nav-item><a id=nav-rss-link class=nav-link href=//owent.net/index.xml title=RSS订阅>RSS订阅</a></li>
</ul>
<div class="col-2 position-absolute end-0"><form class=input-group method=get accept-charset=utf-8 action=//www.bing.com/search>
<input type=hidden name=q1 value=site:owent.net>
<input class=form-control type=text placeholder=搜索 name=q>
<button class="btn btn-outline-secondary my-2 my-sm-0" type=submit>搜索</button>
</form></div>
</div>
</nav>
</div>
</div>
</header>
<div id=main><section id=main-content>
<div id=post-content><article id=post-84176b21a991845bfd73f0d936e6aa51 class="article-panel article article-type-post" itemscope itemprop=blogPost>
<div class="article-panel-inner article-inner">
<div class=article-inner>
<header class=article-header><h1 itemprop=name><a class=article-title href=//owent.net/2014/1038.html target=_blank itemprop=url>Linux 编译安装 GCC 4.9</a></h1></header><hr>
<div id=toc class="well toc m-3 p-1 pr-1 pt-1 pb-2 float-md-right float-md-end"><nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#准备环境及依赖项>准备环境及依赖项</a></li>
<li><a href=#我编译的环境>我编译的环境</a></li>
</ul>
</li>
</ul>
</nav></div><br>
<div class=article-entry itemprop=articleBody><p>详情及变更请参照: <a href=https://github.com/owent/OWenT-s-Utils/tree/master/Bash%26Shell/GCC%20Installer/gcc-4.9>Linux 编译安装 GCC 4.9</a></p>
<p>GCC4.9发布啦，本脚本在之前4.8的基础上做了稍许改进，更新
PS：4.9.0 开始支持C++1y特性
GCC 4.9 的大致变更如下，因为我只用C/C++所以更关注**通用性高的C和C++**的部分啦：</p>
<ol>
<li>标记过时系统</li>
<li>移除mudflag功能</li>
<li>在ARM架构中引入内存错误检查器AddressSanitizer</li>
<li>增加运行时错误检测器UndefinedBehaviorSanitizer</li>
<li>多项链接优化（包含对类型合并功能重写、函数体按需加载等）[Debug模式的Firefox内存消耗从15GB降到3.5GB,链接时间从1700秒降到350秒]</li>
<li>Inter-procedural优化改进（包含新的继承类型分析模型、直接调用转为非直接调用和本地符号别名等）</li>
<li>Feedback优化（包含对c++内联函数性能分析的改进、函数排序等）</li>
<li>支持OpenMP 4.0[并行计算]</li>
<li>C、C++、Fortran增加date-time警告</li>
<li>GNAT切换到Ada2012</li>
<li><strong>C/C++ 增加编译信息带颜色输出(-fdiagnostics-color=auto)</strong></li>
<li>单指令多数据（SIMD）指令的无循环依赖断言</li>
<li>支持Cilk Plus(C和C++的数据与任务并行处理插件)</li>
<li><strong>C11原子操作、线程本地存储</strong></li>
<li><strong>C++1y 返回类型检测、lambda函数默认参数支持、可变长度数组、[[deprecated]]属性支持、数字分隔符支持、多态lambda表达式</strong></li>
<li><strong>支持正则表达式、部分C++14实验性内容</strong></li>
<li>Fortran更新的内容我就无情地忽略啦</li>
<li>Go语言1.2.1版本的接口</li>
<li>还有一系列针对特定编译目标架构的优化</li>
</ol>
<p>编译安装 GCC 4.9.X</p>
<h3 id=准备环境及依赖项>准备环境及依赖项</h3>
<ol>
<li>支持 ISO C++ 98 的编译器（GCC 4.7.2 的中期一个patch导致的整个项目开始转为由C++编译）</li>
<li>C标准库及头文件</li>
<li>用于创建Ada编译器的GNAT</li>
<li>支持POSIX的shell或GNU bash</li>
<li>POSIX或SVR4的 awk工具</li>
<li>GNU binutils</li>
<li>gzip 版本1.2.4及以上 （可由GNU镜像列表 <a href=http://www.gnu.org/prep/ftp.html>http://www.gnu.org/prep/ftp.html</a> 或自动选择最佳镜像 <a href=http://ftpmirror.gnu.org>http://ftpmirror.gnu.org</a> 下载 ）</li>
<li>bzip2 版本 1.0.2及以上 （此处可下载 <a href=http://www.bzip.org/>http://www.bzip.org/</a>）</li>
<li>GNU make 工具 版本3.80及以上 （可由GNU镜像列表 <a href=http://www.gnu.org/prep/ftp.html>http://www.gnu.org/prep/ftp.html</a> 或自动选择最佳镜像 <a href=http://ftpmirror.gnu.org>http://ftpmirror.gnu.org</a> 下载 ）</li>
<li>GNU tar工具 版本1.14及以上 （可由GNU镜像列表 <a href=http://www.gnu.org/prep/ftp.html>http://www.gnu.org/prep/ftp.html</a> 或自动选择最佳镜像 <a href=http://ftpmirror.gnu.org>http://ftpmirror.gnu.org</a> 下载 ）</li>
<li>perl 版本5.6.1及以上 （此处可下载 <a href=http://www.perl.org/>http://www.perl.org/</a>）</li>
<li>jar或zip和unzip工具 （此处可下载 <a href=http://www.info-zip.org>http://www.info-zip.org</a>)</li>
<li>gmp库 版本4.3.2及以上 （可由GNU镜像列表 <a href=http://www.gnu.org/prep/ftp.html>http://www.gnu.org/prep/ftp.html</a> 或自动选择最佳镜像 <a href=http://ftpmirror.gnu.org>http://ftpmirror.gnu.org</a> 下载 ）</li>
<li>mpfr库 版本2.4.2及以上 （可由GNU镜像列表 <a href=http://www.gnu.org/prep/ftp.html>http://www.gnu.org/prep/ftp.html</a> 或自动选择最佳镜像 <a href=http://ftpmirror.gnu.org>http://ftpmirror.gnu.org</a> 下载 ）</li>
<li>mpc库 版本0.8.1及以上 （可由GNU镜像列表 <a href=http://www.gnu.org/prep/ftp.html>http://www.gnu.org/prep/ftp.html</a> 或自动选择最佳镜像 <a href=http://ftpmirror.gnu.org>http://ftpmirror.gnu.org</a> 下载 ）</li>
<li>isl 版本 0.10, 0.11 或0.12 （可由GNU镜像列表 <a href=http://www.gnu.org/prep/ftp.html>http://www.gnu.org/prep/ftp.html</a> 或自动选择最佳镜像 <a href=http://ftpmirror.gnu.org>http://ftpmirror.gnu.org</a> 中gcc目录中的infrastructure目录下载 ）</li>
<li>cloog 版本0.18.1（此处可下载 <a href=ftp://gcc.gnu.org/pub/gcc/infrastructure/>ftp://gcc.gnu.org/pub/gcc/infrastructure/</a> ）</li>
</ol>
<h3 id=我编译的环境>我编译的环境</h3>
<h4 id=系统>系统：</h4>
<p>CentOS 6.2 & CentOS 6.5 & Fedora 20 & Ubuntu 14.04 LTS</p>
<h4 id=系统库>系统库：</h4>
<ul>
<li>gzip 1.3.12</li>
<li>zip/unzip 3.0</li>
<li>GNU make 3.81</li>
<li>tar 1.23</li>
<li>perl 5.10.1</li>
<li>bzip2 1.0.5</li>
<li>gcc 4.4.7 or gcc 4.4.5 or gcc 4.8.2</li>
</ul>
<h4 id=编译的依赖库>编译的依赖库：</h4>
<ul>
<li>gmp 6.0.0a</li>
<li>mpfr 3.1.2</li>
<li>mpc 1.0.2</li>
<li>isl 0.11.1</li>
<li>cloog 0.18.1</li>
</ul>
<h4 id=编译目标>编译目标：</h4>
<ul>
<li>gcc 4.9.X</li>
<li>binutils 2.24</li>
<li>python 2.7.8 <em>[按需]</em></li>
<li>gdb 7.7.1 (如果存在ncurses-devel包)</li>
</ul>
<h4 id=注>注：</h4>
<ul>
<li>(所有的库都会被安装在**$PREFEX_DIR**里)</li>
</ul>
<h4 id=额外建议>额外建议：</h4>
<p>给特定用户安装 gdb的pretty-printer 用以友好打印stdc++的stl容器</p>
<ol>
<li>在执行 install.sh 脚本前安装 ncurses-devel 和 python-devel， 用于编译gdb和开启python功能</li>
<li>安装完成后，把[GCC源码目录]/libstdc++-v3/python 复制到[用户目录]/.gdb</li>
<li>编辑[用户目录]/.gdbinit,添加</li>
</ol>
<pre><code class=language-python>import sys
import os
p = os.path.expanduser('~/.gdb/python')
print p
if os.path.exists(p):
    sys.path.insert(0, p)
    from libstdcxx.v6.printers import register_libstdcxx_printers
    register_libstdcxx_printers(None)
end
</code></pre>
<ol start=5>
<li>编译安装gdb</li>
</ol>
<h4 id=history>History:</h4>
<ul>
<li>2014-04-23 Created</li>
<li>2014-04-28 增加一些控制选项</li>
<li>2014-05-23 更新gdb到7.7.1</li>
<li>2014-07-18 更新gcc到4.9.1,更新python到2.7.8</li>
<li>2014-11-12 更新gcc到4.9.2,更新gdb到7.8.1</li>
</ul>
</div>
<hr>
<footer class=article-footer>
<div class="article-panel-footer article-meta article-footer clearfix">
<span class=article-meta-left>
<ol>
<li><a href=//owent.net/categories/article.html>Article</a></li>
<li><a href=//owent.net/categories/work.html>Work</a></li>
</ol>
</span>
<span class=article-meta-right><time datetime=2014-04-23T14:37:46.000+00:00 itemprop=datePublished>2014-04-23</time></span>
<span class=clearfix></span>
</div>
<div class=article-tags>
<ul class=article-tag-list>
<li class=article-tag-list-item><a href=//owent.net/tags/gcc.html>gcc</a></li>
<li class=article-tag-list-item><a href=//owent.net/tags/installer.html>installer</a></li>
</ul>
</div>
</footer>
</div>
<hr>
<nav id=article-nav>
<ul class=pagination>
<li class=page-item>
<a class=page-link id=article-nav-newer class=article-nav-link-wrap href=//owent.net/2014/1046.html>
上一篇<strong>[ACM] HDU 1006 解题报告</strong>
</a>
</li>
<li class=page-item>
<a class=page-link id=article-nav-older class=article-nav-link-wrap href=//owent.net/2014/1036.html>
下一篇<strong>又碰到了这个解谜游戏，顺带记下地址</strong>
</a>
</li>
</ul>
</nav>
<hr>
<section id=comments>
<div id=disqus_thread></div>
<script type=text/javascript>var disqus_config=function(){this.page.identifier='1038'};(function(){var a=document,b=a.createElement('script');b.src='https://owent.disqus.com/embed.js',b.setAttribute('data-timestamp',+new Date),(a.head||a.body).appendChild(b)})()</script>
<noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript>
</section>
</div>
</article></div>
</section></div>
<footer id=footer>
<div class=outer>
<div id=footer-info class="inner clearfix">
<strong id=footer-left class="float-left float-start"><a rel=license href=https://github.com/owent/blog-hugo/blob/master/LICENSE.md><img alt=知识共享许可协议 style=border-width:0 src=https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png></a>
2022
OWenT
</strong>
<strong id=footer-right class="float-right float-end">
<a href=https://github.com/owent/blog-hugo target=_blank>本站源码</a>,
发布者 <a href=https://gohugo.io/ target=_blank>Hugo</a>,
主题 <a href=https://github.com/owent/hugo-theme-distinctionpp target=_blank>distinctionpp</a>
</strong>
<span class=clearfix></span>
</div>
</div>
</footer>
</div>
<script type=text/javascript src=//unpkg.com/@popperjs/core@latest/dist/umd/popper.min.js crossorigin=anonymous></script>
<script type=text/javascript src=//unpkg.com/bootstrap@latest/dist/js/bootstrap.min.js crossorigin=anonymous></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/highlight.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/bash.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/cpp.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/capnproto.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/cmake.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/d.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/diff.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/dos.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/erlang.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/go.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/less.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/lua.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/php.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/powershell.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/protobuf.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/python.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/profile.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/typescript.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/vim.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/rust.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/yaml.min.js></script>
<script type=text/javascript>jQuery(function(){jQuery("head").append('<link rel="stylesheet" href="//unpkg.com/@highlightjs/cdn-assets@latest/styles/vs2015.min.css" />'),window.JSON?hljs.configure(JSON.parse('{"languages":{},"tabreplace":"    ","usebr":false}')):hljs.configure(evel('{"languages":{},"tabreplace":"    ","usebr":false}')),jQuery('pre\u003ecode').each(function(b,a){try{hljs.highlightBlock(a)}catch(a){window.console&&console.log(a.toString()+"\r\nMaybe can not detect the language")}})})</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-19298704-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','UA-19298704-1')</script>
<script type=text/javascript src=//unpkg.com/katex@latest/dist/katex.min.js></script>
<script type=text/javascript src=//unpkg.com/katex@latest/dist/contrib/auto-render.min.js></script>
<script type=text/javascript>jQuery(function(){jQuery("head").append('<link rel="stylesheet" href="//unpkg.com/katex@latest/dist/katex.min.css" />'),renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1}],ignoredTags:['script','noscript','style','textarea','pre','code']})})</script>
<script type=text/javascript src=//unpkg.com/chart.js@latest/dist/chart.min.js></script>
<script type=text/javascript src=//unpkg.com/mermaid@latest/dist/mermaid.min.js></script>
</div>
</body></html>