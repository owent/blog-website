<!doctype html><html lang=zh-cn><head><meta charset=utf-8><title>C++ 新特性学习（六） — 新的字符串编码和伪随机数|I'm OWenT</title><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><link rel=canonical href=//owent.net/2012/560.html><link href=//owent.net/index.xml rel=alternate type=application/rss+xml title="I'm OWenT"><link rel=icon href=../favicon.ico><link rel=stylesheet href=//unpkg.com/bootstrap@latest/dist/css/bootstrap.min.css crossorigin=anonymous><link rel=stylesheet href=//owent.net/css/style.css><script type=text/javascript src=//unpkg.com/jquery@latest/dist/jquery.slim.min.js crossorigin=anonymous></script>
<link rel=stylesheet href=//owent.net/css/syntax.css></head><body><div id=container><div id=wrap><header id=header><div id=banner></div><div id=header-outer><div id=header-title><h1 id=site-title><a href=//owent.net id=logo>I'm OWenT</a></h1><h2 id=site-description>Challenge Everything</h2></div><div id=header-inner><nav id=main-nav class="navbar navbar-expand-md navbar-dark"><button class="navbar-toggler navbar-toggler-right" type=button data-toggle=collapse data-target=#main-nav-links aria-controls=main-nav-links aria-expanded=false aria-label="Toggle navigation">
<span class=navbar-toggler-icon></span></button>
<a id=main-nav-brand class="navbar-brand collapse" href=#>#</a><div class="collapse navbar-collapse position-relative" id=main-nav-links><ul class="navbar-nav mr-auto"><li class=nav-item><a class=nav-link href=../ title=Home>Home</a></li><li class=nav-item><a class=nav-link href=../archives.html title=Archives>Archives</a></li><li class=nav-item><a class=nav-link href=../about.html title=About>About</a></li><li class=nav-item><a id=nav-rss-link class=nav-link href=//owent.net/index.xml title=RSS订阅>RSS订阅</a></li></ul><div class="col-2 position-absolute end-0"><form class=input-group method=get accept-charset=utf-8 action=//www.bing.com/search><input type=hidden name=q1 value=site:owent.net>
<input class=form-control type=text placeholder=搜索 name=q>
<button class="btn btn-outline-secondary my-2 my-sm-0" type=submit>搜索</button></form></div></div></nav></div></div></header><div id=main><section id=main-content><div id=post-content><article id=post-d312cdb331d66cda34e8e03b84bc6072 class="article-panel article article-type-post" itemscope itemprop=blogPost><div class="article-panel-inner article-inner"><div class=article-inner><header class=article-header><h1 itemprop=name><a class=article-title href=//owent.net/2012/560.html target=_blank itemprop=url>C++ 新特性学习（六） — 新的字符串编码和伪随机数</a></h1></header><hr><div id=toc class="well toc m-3 p-1 pr-1 pt-1 pb-2 float-md-right float-md-end"><nav id=TableOfContents><ul><li><a href=#新的字符编码>新的字符编码</a></li><li><a href=#伪随机数>伪随机数</a><ul><li><a href=#随机数引擎预设类>随机数引擎预设类</a></li><li><a href=#分布类>分布类</a></li></ul></li></ul></nav></div><br><div class=article-entry itemprop=articleBody><p>其实这个部分是我觉得最没用的部分</p><h2 id=新的字符编码>新的字符编码</h2><p><strong>注：这部分仅测过GCC，VS暂不支持</strong></p><p>在旧的标准C++中支持两种字符编码。</p><p>直接使用””将产生const char。</p><p>使用L””将产生const wchar。</p><p>新标准中增加了三种，即UTF-8、UTF-16和UTF-32。</p><p>使用u8″”为能至少储存UTF-8的8位元编码。</p><p>使用u””为能至少储存UTF-16的16位元编码,对应’\u’表示16位元的字符。</p><p>使用U””为能至少储存UTF-32的32位元编码,对应’\U’表示16位元的字符。</p><pre><code class=language-cpp>printf(&quot;%d\n&quot;, sizeof(  &quot;This is a UTF-8 string. &quot;)); // 类别是const char[]
printf(&quot;%d\n&quot;, sizeof(u8&quot;This is a UTF-8 string. &quot;)); // 类别是const char[]
printf(&quot;%d\n&quot;, sizeof( u&quot;This is a UTF-16 string.&quot;)); // 类别是const char16_t[]
printf(&quot;%d\n&quot;, sizeof( U&quot;This is a UTF-32 string.&quot;)); // 类别是const char32_t[]
</code></pre><p>另外，未加工字符串面值没看懂有什么用,申明方法是R”标识符(字符串)标识符”，并且这里的字符串的”和\是不需要转义的。同时可以和上面的合用。如：</p><ul><li>u8R”XXX(I’m a “raw UTF-8″ string.)XXX”</li><li>uR”OWenT(This is a “raw UTF-16″ string.)OWenT”</li><li>UR”(This is a “raw UTF-32″ string.)”</li></ul><pre><code class=language-cpp>// 这两行代码输出一样,都是 I'm OWenT \ &quot;OWenT&quot; is a ID.
puts(R&quot;I'm OWenT \ &quot;OWenT&quot; is a ID.)&quot;);
puts(R&quot;OWenT(I'm OWenT \ &quot;OWenT&quot; is a ID.)OWenT&quot;);
</code></pre><p>这个东西总感觉没什么用，只是限定了字符的长度。而目前输入和输出都不能直接操作这些编码。也就是关键的部分还得自己来。</p><h2 id=伪随机数>伪随机数</h2><p>这个库主要是提供了多钟生成符合统计学里各种分布的随机数和随机数生成引擎，这部分我觉得不怎么用得上所以只是大略看了一下，下面是我看的时候做的记录。</p><p>C++11 的随机数功能分为两部分： 第一，一个乱数生成引擎，其中包含该生成引擎的状态，用来产生乱数。第二，一个分布，这可以用来决定产生乱数的范围，也可以决定以何种分布方式产生乱数。乱数生成对象即是由乱数生成引擎和分布所构成。</p><p>C++11 将会提供三种随机数算法，每一种算法都有其强项和弱项:</p><table><thead><tr><th>模板类</th><th>整数/浮点数</th><th>品质</th><th>速度</th><th>状态数</th></tr></thead><tbody><tr><td>linear_congruential</td><td>整数</td><td>低</td><td>中等</td><td>1</td></tr><tr><td>subtract_with_carry</td><td>两者皆可</td><td>中等</td><td>快</td><td>25</td></tr><tr><td>mersenne_twister</td><td>整数</td><td>佳</td><td>快</td><td>624</td></tr></tbody></table><h3 id=随机数引擎预设类>随机数引擎预设类</h3><table><thead><tr><th>类名</th><th>定义</th></tr></thead><tbody><tr><td>minstd_rand0</td><td>std::linear_congruential_engine&lt;uint_fast32_t, 16807, 0, 2147483647></td></tr><tr><td>minstd_rand</td><td>std::linear_congruential_engine&lt;uint_fast32_t, 48271, 0, 2147483647></td></tr><tr><td>mt19937</td><td>std::mersenne_twister_engine&lt;uint_fast32_t, 32, 624, 397, 31, 0x9908b0df, 11, 0xffffffff, 7, 0x9d2c5680, 15, 0xefc60000, 18, 1812433253></td></tr><tr><td>mt19937_64</td><td>std::mersenne_twister_engine&lt;uint_fast64_t, 64, 312, 156, 31, 0xb5026f5aa96619e9, 29,0x5555555555555555, 17, 0x71d67fffeda60000, 37, 0xfff7eee000000000, 43, 6364136223846793005></td></tr><tr><td>ranlux24_base</td><td>std::subtract_with_carry_engine&lt;uint_fast32_t, 24, 10, 24></td></tr><tr><td>ranlux48_base</td><td>std::subtract_with_carry_engine&lt;uint_fast64_t, 48, 5, 12></td></tr><tr><td>ranlux24</td><td>std::discard_block_engine&lt;ranlux24_base, 223, 23></td></tr><tr><td>ranlux48</td><td>std::discard_block_engine&lt;ranlux48_base, 389, 11></td></tr><tr><td>knuth_b</td><td>std::shuffle_order_engine&lt;minstd_rand0, 256></td></tr><tr><td>default_random_engine</td><td>implementation-defined</td></tr></tbody></table><h3 id=分布类>分布类</h3><h4 id=uniform-distributions-离散型均匀分布>Uniform distributions (离散型均匀分布)</h4><ul><li>uniform_int_distribution</li><li>uniform_real_distribution</li><li>generate_canonical</li></ul><h4 id=bernoulli-distributions-伯努利分布>Bernoulli distributions (伯努利分布)</h4><ul><li>bernoulli_distribution</li><li>binomial_distribution</li><li>negative_binomial_distribution</li><li>geometric_distribution</li></ul><h4 id=poisson-distributions-卜瓦松分布>Poisson distributions (卜瓦​松分布)</h4><ul><li>poisson_distribution</li><li>exponential_distribution</li><li>gamma_distribution</li><li>weibull_distribution</li><li>extreme_value_distribution</li></ul><h4 id=normal-distributions-正态分布>Normal distributions (正态分布)</h4><ul><li>normal_distribution</li><li>lognormal_distribution</li><li>chi_squared_distribution</li><li>cauchy_distribution</li><li>fisher_f_distribution</li><li>student_t_distribution</li></ul><h4 id=sampling-distributions-抽样分布>Sampling distributions (抽样​分布)</h4><ul><li>discrete_distribution</li><li>piecewise_constant_distribution</li><li>piecewise_linear_distribution</li></ul><p>至于调用方法嘛，类似下面这样</p><pre><code class=language-cpp>std::uniform_int_distribution&lt;int&gt; distribution(0, 99); // [0, 99)的离散均匀分布
std::mt19937 engine; // 随机数引擎
int random = distribution (engine);  // 产生随机数
</code></pre></div><hr><footer class=article-footer><div class="article-panel-footer article-meta article-footer clearfix"><span class=article-meta-left><ol><li><a href=//owent.net/categories/article.html>Article</a></li><li><a href=//owent.net/categories/blablabla.html>Blablabla</a></li></ol></span><span class=article-meta-right><time datetime=2012-02-27T05:37:59.000+00:00 itemprop=datePublished>2012-02-27</time></span>
<span class=clearfix></span></div><div class=article-tags><ul class=article-tag-list><li class=article-tag-list-item><a href=//owent.net/tags/c++0x/11.html>c++0x/11</a></li><li class=article-tag-list-item><a href=//owent.net/tags/c++11.html>c++11</a></li><li class=article-tag-list-item><a href=//owent.net/tags/%E4%BC%AA%E9%9A%8F%E6%9C%BA%E6%95%B0.html>伪随机数</a></li><li class=article-tag-list-item><a href=//owent.net/tags/%E7%BB%9F%E8%AE%A1%E5%AD%A6.html>统计学</a></li><li class=article-tag-list-item><a href=//owent.net/tags/%E7%BC%96%E7%A0%81.html>编码</a></li><li class=article-tag-list-item><a href=//owent.net/tags/%E9%9A%8F%E6%9C%BA%E6%95%B0.html>随机数</a></li></ul></div></footer></div><hr><nav id=article-nav><ul class=pagination><li class=page-item><a class=page-link id=article-nav-newer class=article-nav-link-wrap href=//owent.net/2012/573.html>上一篇<strong>JSON显示库 -- showJson （Javascript）</strong></a></li><li class=page-item><a class=page-link id=article-nav-older class=article-nav-link-wrap href=//owent.net/2012/558.html>下一篇<strong>C++ 新特性学习（五） — 引用包装、元编程的类型属性和计算函数对象返回类型</strong></a></li></ul></nav><hr><script src=https://utteranc.es/client.js repo=owent/blog-website issue-term=pathname theme=github-light crossorigin=anonymous async></script></div></article></div></section></div><footer id=footer><div class=outer><div id=footer-info class="inner clearfix"><strong id=footer-left class="float-left float-start"><a rel=license href=https://github.com/owent/blog-hugo/blob/master/LICENSE.md><img alt=知识共享许可协议 style=border-width:0 src=https://i.creativecommons.org/l/by-nc-sa/4.0/80x15.png></a>
2023
OWenT</strong>
<strong id=footer-right class="float-right float-end"><a href=https://github.com/owent/blog-hugo target=_blank>本站源码</a>,
发布者 <a href=https://gohugo.io/ target=_blank>Hugo</a>,
主题 <a href=https://github.com/owent/hugo-theme-distinctionpp target=_blank>distinctionpp</a></strong>
<span class=clearfix></span></div></div></footer></div><script type=text/javascript src=//unpkg.com/@popperjs/core@latest/dist/umd/popper.min.js crossorigin=anonymous></script>
<script type=text/javascript src=//unpkg.com/bootstrap@latest/dist/js/bootstrap.min.js crossorigin=anonymous></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/highlight.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/awk.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/bash.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/cpp.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/capnproto.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/cmake.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/d.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/diff.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/dockerfile.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/dos.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/erlang.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/go.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/less.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/llvm.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/lua.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/php.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/powershell.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/protobuf.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/python.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/profile.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/typescript.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/vim.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/rust.min.js></script>
<script type=text/javascript src=//unpkg.com/@highlightjs/cdn-assets@latest/languages/yaml.min.js></script>
<script type=text/javascript>jQuery(function(){jQuery("head").append('<link rel="stylesheet" href="//unpkg.com/@highlightjs/cdn-assets@latest/styles/vs2015.min.css" />'),window.JSON?hljs.configure(JSON.parse('{"ignoreunescapedhtml":true,"languages":{},"tabreplace":"    ","throwunescapedhtml":false,"usebr":false}')):hljs.configure(evel('{"ignoreunescapedhtml":true,"languages":{},"tabreplace":"    ","throwunescapedhtml":false,"usebr":false}'));const e={};for(const t of hljs.listLanguages())e[t.toLowerCase()]=!0;jQuery("pre\u003ecode").each(function(e,t){try{if(t.className.match(/\bnohighlight\b/i))return;const e=t.className.match(/language-([^\s]+)/i);if(e&&e.length>=2&&hljs.getLanguage(e[1]))hljs.highlightElement(t);else{const e=jQuery(t),n=hljs.highlightAuto(e.text(),hljs.listLanguages());n&&n.value&&(e.html(n.value),e.addClass("hljs"))}}catch(e){window.console&&console.log(e.toString()+`
Maybe can not detect the language`)}})})</script><script async src="https://www.googletagmanager.com/gtag/js?id=UA-19298704-1"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","UA-19298704-1")</script><script type=text/javascript src=//unpkg.com/katex@latest/dist/katex.min.js></script>
<script type=text/javascript src=//unpkg.com/katex@latest/dist/contrib/auto-render.min.js></script>
<script type=text/javascript>jQuery(function(){jQuery("head").append('<link rel="stylesheet" href="//unpkg.com/katex@latest/dist/katex.min.css" />'),renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"\\[",right:"\\]",display:!0},{left:"\\(",right:"\\)",display:!1},{left:"$",right:"$",display:!1}],throwOnError:!1,ignoredTags:["script","noscript","style","textarea","pre","code"]})})</script><script type=text/javascript src=//unpkg.com/chart.js@latest/dist/chart.umd.js></script>
<script type=text/javascript src=//unpkg.com/mermaid@latest/dist/mermaid.esm.min.mjs></script></div></body></html>